(function(e,t,n,r){function i(r){if(!n[r]){if(!t[r]){if(e)return e(r);throw new Error("Cannot find module '"+r+"'")}var s=n[r]={exports:{}};t[r][0](function(e){var n=t[r][1][e];return i(n?n:e)},s,s.exports)}return n[r].exports}for(var s=0;s<r.length;s++)i(r[s]);return i})(typeof require!=="undefined"&&require,{1:[function(require,module,exports){(function(){var http,prep_options;http=require("../lib/http.coffee");prep_options=function(options){options["accepts"]={json:http["content-type"]};options["contentType"]=http["content-type"];return options["dataType"]="json"};http.get=function(href,options,done){if(options==null){options={}}if(done==null){done=function(){}}prep_options(options);options["success"]=function(data,textStatus,jqXHR){return done(null,data)};return $.ajax(href,options)};http.post=function(href,options,done){if(options==null){options={}}if(done==null){done=function(){}}prep_options(options);options["type"]="post";options["data"]=JSON.stringify(options.body.template);console.log(options);options["success"]=function(data,textStatus,jqXHR){return done(null,data)};return $.ajax(href,options)};window.CollectionJSON=require("../lib/client.coffee");window.CollectionJSON.http=http}).call(this)},{"../lib/http.coffee":2,"../lib/client.coffee":3}],2:[function(require,module,exports){(function(){var defaults,performCache;module.exports=defaults={_get:function(href,options,done){if(done==null){done=function(){}}return done(new Error("'GET' not implemented"))},_post:function(href,options,done){if(done==null){done=function(){}}return done(new Error("'POST' not implemented"))},_put:function(href,options,done){if(done==null){done=function(){}}return done(new Error("'PUT' not implemented"))},_del:function(href,options,done){if(done==null){done=function(){}}return done(new Error("'DELETE' not implemented"))},cache:{put:function(key,value,time,done){if(done==null){done=function(){}}if(typeof time==="function"){done=time;time=null}return done()},del:function(key,done){if(done==null){done=function(){}}return done()},clear:function(done){if(done==null){done=function(){}}return done()},get:function(key,done){if(done==null){done=function(){}}return done()},size:function(done){if(done==null){done=function(){}}return done(0)},memsize:function(done){if(done==null){done=function(){}}return done(0)},debug:function(){return true}}};module.exports["content-type"]="application/vnd.collection+json";module.exports.get=function(href,options,done){return defaults.cache.get(href,function(error,collection){if(error||collection){return done(error,collection)}options.headers||(options.headers={});options.headers["accept"]=module.exports["content-type"];module.exports.setOptions(href,options);return defaults._get(href,options,function(error,collection,headers){if(error){return done(error)}performCache(collection,headers);return done(error,collection)})})};module.exports.post=function(href,options,done){if(options==null){options={}}options.headers||(options.headers={});options.headers["accept"]=module.exports["content-type"];options.headers["content-type"]=module.exports["content-type"];module.exports.setOptions(href,options);return defaults._post(href,options,function(error,collection,headers){return done(error,collection)})};module.exports.setOptions=function(href,options){};performCache=function(collection,headers){}}).call(this)},{}],3:[function(require,module,exports){(function(){var http;http=require("./http.coffee");module.exports=function(href,options,done){if(typeof options==="function"){done=options;options={}}return http.get(href,options,function(error,collection){if(error){return done(error)}return module.exports.parse(collection,done)})};module.exports.parse=function(collection,done){var collectionObj,error,_error;if(done==null){throw new Error("Callback must be passed to parse")}if(collection==null){return done()}if(typeof collection==="string"){try{collection=JSON.parse(collection)}catch(e){e.body=collection;console.log(e.body);done(e)}}collectionObj=null;try{collectionObj=new module.exports.Collection(collection)}catch(e){e.body=JSON.stringify(collection);return done(e)}error=null;if(_error=collectionObj.error){error=new Error;error.title=_error.title;error.message=_error.message;error.code=_error.code;error.body=JSON.stringify(collection)}return done(error,collectionObj)};module.exports.Collection=require("./attributes/collection.coffee")}).call(this)},{"./http.coffee":2,"./attributes/collection.coffee":4}],4:[function(require,module,exports){(function(){var Collection,http,_;_=require("../underscore.coffee");http=require("../http.coffee");Function.prototype.define=function(prop,desc){return Object.defineProperty(this.prototype,prop,desc)};module.exports=Collection=function(){function Collection(collection){var _ref;if((collection!=null?(_ref=collection.collection)!=null?_ref.version:void 0:void 0)!=="1.0"){throw new Error("Collection does not conform to Collection+JSON 1.0 Spec")}this._collection=collection.collection;this._links=null;this._queries=null;this._items=null;this._template=null;this.error=this._collection.error}Collection.define("href",{get:function(){return this._collection.href}});Collection.define("version",{get:function(){return this._collection.version}});Collection.define("links",{get:function(){var Link,links;if(this._links){return this._links}this._links=links=[];Link=require("./link.coffee");_.each(this._collection.links,function(link){return links.push(new Link(link))});return this._links}});Collection.prototype.link=function(rel){return _.find(this.links,function(link){return link.rel===rel})};Collection.define("items",{get:function(){var Item,items;if(this._items){return this._items}this._items=items=[];Item=require("./item.coffee");_.each(this._collection.items,function(item){return items.push(new Item(item))});return this._items}});Collection.prototype.item=function(href){return _.find(this.items,function(item){return item.href===href})};Collection.define("queries",{get:function(){var Query,queries;queries=[];Query=require("./query.coffee");_.each(this._collection.queries||[],function(query){return queries.push(new Query(query))});return queries}});Collection.prototype.query=function(rel){var Query,query;query=_.find(this._collection.queries||[],function(query){return query.rel===rel});if(!query){return null}Query=require("./query.coffee");return new Query(query)};Collection.prototype.template=function(name){var Template;Template=require("./template.coffee");return new Template(this._collection.href,this._collection.template)};return Collection}()}).call(this)},{"../underscore.coffee":5,"../http.coffee":2,"./link.coffee":6,"./item.coffee":7,"./query.coffee":8,"./template.coffee":9}],8:[function(require,module,exports){(function(){var Collection,Query,client,http,_;_=require("../underscore.coffee");http=require("../http.coffee");client=require("../client.coffee");Collection=require("./collection.coffee");module.exports=Query=function(){function Query(_query,form){var _form;this._query=_query;this.form=form!=null?form:{};_query=this._query;_form=this.form;_.each(_query.data,function(datum){if(_form[datum.name]==null){return _form[datum.name]=datum.value}})}Query.prototype.datum=function(key){var datum;datum=_.find(this._query.data||[],function(datum){return datum.name===key});return _.clone(datum)};Query.prototype.get=function(key){return this.form[key]};Query.prototype.set=function(key,value){return this.form[key]=value};Query.prototype.promptFor=function(key){var _ref;return(_ref=this.datum(key))!=null?_ref.prompt:void 0};Query.define("href",{get:function(){return this._query.href}});Query.define("rel",{get:function(){return this._query.rel}});Query.define("prompt",{get:function(){return this._query.prompt}});Query.prototype.submit=function(done){var options;if(done==null){done=function(){}}options={qs:this.form};return http.get(this._query.href,options,function(error,collection){if(error){return done(error)}return client.parse(collection,done)})};return Query}()}).call(this)},{"../underscore.coffee":5,"../http.coffee":2,"../client.coffee":3,"./collection.coffee":4}],7:[function(require,module,exports){(function(){var Collection,Item,Link,Template,client,http,_;_=require("../underscore.coffee");http=require("../http.coffee");client=require("../client.coffee");Collection=require("./collection.coffee");Link=require("./link.coffee");Template=require("./template.coffee");module.exports=Item=function(){function Item(_item,_template){this._item=_item;this._template=_template;this._links={};this._data=null}Item.define("href",{get:function(){return this._item.href}});Item.prototype.datum=function(key){var datum;datum=_.find(this._item.data,function(item){return item.name===key});return _.clone(datum)};Item.prototype.get=function(key){var _ref;return(_ref=this.datum(key))!=null?_ref.value:void 0};Item.prototype.promptFor=function(key){var _ref;return(_ref=this.datum(key))!=null?_ref.prompt:void 0};Item.prototype.load=function(done){var options;options={};return http.get(this._item.href,options,function(error,collection){if(error){return done(error)}return client.parse(collection,done)})};Item.prototype.links=function(){return this._item.links};Item.prototype.link=function(rel){var link;link=_.find(this._item.links||[],function(link){return link.rel===rel});if(!link){return null}Link=require("./link.coffee");if(link){this._links[rel]=new Link(link)}return this._links[rel]};Item.prototype.edit=function(){var template;if(!this._template){throw new Error("Item does not support editing")}template=_.clone(this._template);template.href=this._item.href;return new Template(template,this.data())};Item.prototype.remove=function(done){var options;options={};return http.del(this._item.href,options,function(error,collection){if(error){return done(error)}return client.parse(collection,done)})};return Item}()}).call(this)},{"../underscore.coffee":5,"../http.coffee":2,"../client.coffee":3,"./collection.coffee":4,"./link.coffee":6,"./template.coffee":9}],6:[function(require,module,exports){(function(){var Collection,Link,client,http;http=require("../http.coffee");client=require("../client.coffee");Collection=require("./collection.coffee");module.exports=Link=function(){function Link(_link){this._link=_link}Link.define("href",{get:function(){return this._link.href}});Link.define("rel",{get:function(){return this._link.rel}});Link.define("prompt",{get:function(){return this._link.prompt}});Link.prototype.follow=function(done){var options;if(done==null){done=function(){}}options={};return http.get(this._link.href,options,function(error,collection){if(error){return done(error)}return client.parse(collection,done)})};return Link}()}).call(this)},{"../http.coffee":2,"../client.coffee":3,"./collection.coffee":4}],9:[function(require,module,exports){(function(){var Collection,Template,client,http,_;_=require("../underscore.coffee");http=require("../http.coffee");client=require("../client.coffee");Collection=require("./collection.coffee");module.exports=Template=function(){function Template(href,_template,form){var _form;this.href=href;this._template=_template;this.form=form!=null?form:{};_template=this._template;_form=this.form;_.each((_template!=null?_template.data:void 0)||[],function(datum){if(_form[datum.name]==null){return _form[datum.name]=datum.value}})}Template.prototype.datum=function(key){var datum,_ref;datum=_.find(((_ref=this._template)!=null?_ref.data:void 0)||[],function(datum){return datum.name===key});return _.clone(datum)};Template.prototype.get=function(key){return this.form[key]};Template.prototype.set=function(key,value){return this.form[key]=value};Template.prototype.promptFor=function(key){var _ref;return(_ref=this.datum(key))!=null?_ref.prompt:void 0};Template.prototype.submit=function(done){var form,options;if(done==null){done=function(){}}form=_.map(this.form,function(value,name){return{name:name,value:value}});options={body:{template:{data:form}}};return http.post(this.href,options,function(error,collection){if(error){return done(error)}return client.parse(collection,done)})};return Template}()}).call(this)},{"../underscore.coffee":5,"../http.coffee":2,"../client.coffee":3,"./collection.coffee":4}],10:[function(require,module,exports){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&&window.setImmediate;var canPost=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(canSetImmediate){return function(f){return window.setImmediate(f)}}if(canPost){var queue=[];window.addEventListener("message",function(ev){if(ev.source===window&&ev.data==="process-tick"){ev.stopPropagation();if(queue.length>0){var fn=queue.shift();fn()}}},true);return function nextTick(fn){queue.push(fn);window.postMessage("process-tick","*")}}return function nextTick(fn){setTimeout(fn,0)}}();process.title="browser";process.browser=true;process.env={};process.argv=[];process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")}},{}],5:[function(require,module,exports){(function(process){(function(){module.exports=process.browser?window._:require("underscore")}).call(this)})(require("__browserify_process"))},{underscore:11,__browserify_process:10}],11:[function(require,module,exports){(function(){(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.4.4";var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return}}else{for(var key in obj){if(_.has(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return}}}};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)});return results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,index,list){if(!initial){memo=value;initial=true}else{memo=iterator.call(context,memo,value,index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}each(obj,function(value,index,list){index=keys?keys[--length]:--length;if(!initial){memo=obj[index];initial=true}else{memo=iterator.call(context,memo,obj[index],index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results[results.length]=value});return results};_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)};_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker});return!!result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker});return!!result};_.contains=_.include=function(obj,target){if(obj==null)return false;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;return any(obj,function(value){return value===target})};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})};_.where=function(obj,attrs,first){if(_.isEmpty(attrs))return first?null:[];return _[first?"find":"filter"](obj,function(value){for(var key in attrs){if(attrs[key]!==value[key])return false}return true})};_.findWhere=function(obj,attrs){return _.where(obj,attrs,true)};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.max.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity,value:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})});return result.value};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.min.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity,value:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})});return result.value};_.shuffle=function(obj){var rand;var index=0;var shuffled=[];each(obj,function(value){rand=_.random(index++);shuffled[index-1]=shuffled[rand];shuffled[rand]=value});return shuffled};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index<right.index?-1:1}),"value")};var group=function(obj,value,context,behavior){var result={};var iterator=lookupIterator(value||_.identity);each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)});return result};_.groupBy=function(obj,value,context){return group(obj,value,context,function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)})};_.countBy=function(obj,value,context){return group(obj,value,context,function(result,key){if(!_.has(result,key))result[key]=0;result[key]++})};_.sortedIndex=function(array,obj,iterator,context){iterator=iterator==null?_.identity:lookupIterator(iterator);var value=iterator.call(context,obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;return n!=null&&!guard?slice.call(array,0,n):array[0]};_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))};_.last=function(array,n,guard){if(array==null)return void 0;if(n!=null&&!guard){return slice.call(array,Math.max(array.length-n,0))}else{return array[array.length-1]}};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){each(input,function(value){if(_.isArray(value)){shallow?push.apply(output,value):flatten(value,shallow,output)}else{output.push(value)}});return output};_.flatten=function(array,shallow){return flatten(array,shallow,[])};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted)){context=iterator;iterator=isSorted;isSorted=false}var initial=iterator?_.map(array,iterator,context):array;var results=[];var seen=[];each(initial,function(value,index){if(isSorted?!index||seen[seen.length-1]!==value:!_.contains(seen,value)){seen.push(value);results.push(array[index])}});return results};_.union=function(){return _.uniq(concat.apply(ArrayProto,arguments))};_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})};_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){var args=slice.call(arguments);var length=_.max(_.pluck(args,"length"));var results=new Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(args,""+i)}return results};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,l=list.length;i<l;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,l=array.length;if(isSorted){if(typeof isSorted=="number"){i=isSorted<0?Math.max(0,l+isSorted):isSorted}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1}}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<l;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var hasIndex=from!=null;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf){return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item)}var i=hasIndex?from:array.length;while(i--)if(array[i]===item)return i;return-1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step}return range};_.bind=function(func,context){if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));var args=slice.call(arguments,2);return function(){return func.apply(context,args.concat(slice.call(arguments)))}};_.partial=function(func){var args=slice.call(arguments,1);return function(){return func.apply(this,args.concat(slice.call(arguments)))}};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length===0)funcs=_.functions(obj);each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};_.throttle=function(func,wait){var context,args,timeout,result;var previous=0;var later=function(){previous=new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,result;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)result=func.apply(context,args)};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result}};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;memo=func.apply(this,arguments);func=null;return memo}};_.wrap=function(func,wrapper){return function(){var args=[func];push.apply(args,arguments);return wrapper.apply(this,args)}};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)]}return args[0]}};_.after=function(times,func){if(times<=0)return func();return function(){if(--times<1){return func.apply(this,arguments)}}};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)if(_.has(obj,key))keys[keys.length]=key;return keys};_.values=function(obj){var values=[];for(var key in obj)if(_.has(obj,key))values.push(obj[key]);return values};_.pairs=function(obj){var pairs=[];for(var key in obj)if(_.has(obj,key))pairs.push([key,obj[key]]);return pairs};_.invert=function(obj){var result={};for(var key in obj)if(_.has(obj,key))result[obj[key]]=key;return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){obj[prop]=source[prop]}}});return obj};_.pick=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));each(keys,function(key){if(key in obj)copy[key]=obj[key]});return copy};_.omit=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj){if(!_.contains(keys,key))copy[key]=obj[key]}return copy};_.defaults=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]==null)obj[prop]=source[prop]}}});return obj};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return false;var length=aStack.length;while(length--){if(aStack[length]==a)return bStack[length]==b}aStack.push(a);bStack.push(b);var size=0,result=true;if(className=="[object Array]"){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break}}}else{var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)){return false}for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break}}if(result){for(key in b){if(_.has(b,key)&&!size--)break}result=!size}}aStack.pop();bStack.pop();return result};_.isEqual=function(a,b){return eq(a,b,[],[])};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"};_.isObject=function(obj){return obj===Object(obj)};each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,"callee"))}}if(typeof/./!=="function"){_.isFunction=function(obj){return typeof obj==="function"}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.times=function(n,iterator,context){var accum=Array(n);for(var i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){if(string==null)return"";return(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}});_.result=function(object,property){if(object==null)return null;var value=object[property];return _.isFunction(value)?value.call(object):value};_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]});if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}if(evaluate){source+="';\n"+evaluate+"\n__p+='"
}index=offset+match.length;return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};template.source="function("+(settings.variable||"obj")+"){\n"+source+"}";return template};_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name=="shift"||name=="splice")&&obj.length===0)delete obj[0];return result.call(this,obj)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}});_.extend(_.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this)})()},{}]},{},[1]);